<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alward Hafez — Portfolio</title>
    <meta name="description" content="Mechatronics engineer specializing in robotics, IoT, and computer vision. Projects include robotic arm control, AI-based safety systems, and smart agriculture monitoring.">
    <meta name="theme-color" content="#0d1117">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="shortcut icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <meta property="og:title" content="Alward Hafez — Portfolio">
    <meta property="og:description" content="Robotics, IoT, and computer vision projects with real-world impact.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="images/profile.webp">
    <meta property="og:url" content="">
    <meta name="twitter:card" content="summary_large_image">
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
/>

    <style>
        .hero-carousel {
        height: 60vh;
        width: 100%;
        overflow: hidden;
        }

        .swiper-slide {
        background-size: cover;
        background-position: center;
        height: 100%;
        }

        .carousel-track {
        display: flex;
        height: 100%;
        transition: transform 0.8s ease-in-out;
        will-change: transform;
        }

        .carousel-slide {
        flex: 0 0 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        position: relative;
        display: flex;
        align-items: flex-end;
        justify-content: center;
        }

        .slide-content {
        position: relative;
        z-index: 2;
        text-align: center;
        color: white;
        max-width: 800px;
        padding: 1rem 2rem 3rem; /* bottom padding to not overlap dots */
        }

        

        .carousel-dots {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 3;
        }

        .carousel-dot {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.5);
        cursor: pointer;
        transition: all 0.3s ease;
        }

        .carousel-dot.active {
        background: white;
        transform: scale(1.2);
        }




        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 25%, #1a252f 50%, #0d1117 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: #333;
            padding-top: 60px;
        }

        /* Sticky Navigation */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 0.5rem 0;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            z-index: 999;
            transition: all 0.3s ease;
        }

        /* Prevent navbar shift when scrollbar is hidden */
        body.mobile-menu-open .navbar {
            right: var(--scrollbar-width, 0);
        }

        .navbar.scrolled {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 0 2px 30px rgba(0,0,0,0.15);
        }

        .nav-container {
            max-width: 100%;
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            /* Handle overflow better */
            overflow: visible;
            position: relative;
            width: 100%;
            padding: 0 2rem;
        }

        .quote-fade {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInQuote 1.2s ease-out 1.5s forwards;
        }

        @keyframes fadeInQuote {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }


        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
            text-decoration: none;
            /* Prevent text wrapping */
            white-space: nowrap;
            /* Ensure proper spacing */
            margin: 0;
            padding: 0.5rem 0;
        }

        .nav-links {
            display: flex;
            list-style: none;
            margin: 0;
            padding: 0;
            gap: 1.5rem;
            flex-wrap: nowrap;
            align-items: center;
            min-width: 0;
            flex-shrink: 1;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0.15rem;
            /* Improve touch targets for mobile devices */
            min-height: 44px;
            display: flex;
            align-items: center;
            /* Prevent text selection on touch */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            /* Improve touch responsiveness */
            -webkit-tap-highlight-color: transparent;
            /* Prevent text wrapping */
            white-space: nowrap;
            /* Ensure proper spacing */
            margin: 0;
            /* Allow shrinking if needed */
            flex-shrink: 1;
        }

        .nav-links a:hover {
            color: #2c3e50;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .nav-links a.active {
            color: #2c3e50;
        }

        .nav-links a.active::after {
            width: 100%;
        }

        /* Mobile Menu */
        .mobile-menu {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
            /* Improve touch targets */
            padding: 8px;
            min-width: 44px;
            min-height: 44px;
            justify-content: center;
            align-items: center;
            /* Prevent text selection and improve touch responsiveness */
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .mobile-menu span {
            width: 25px;
            height: 3px;
            background: #333;
            transition: all 0.3s ease;
        }

        /* Fade-in Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-play-state: paused;
        }

        .fade-in-delayed {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1s ease forwards;
            animation-delay: 0.3s;
            animation-play-state: paused;
        }

        .fade-in-slow {
            opacity: 0;
            transform: translateY(30px);
            animation: fadeInUp 1.2s ease forwards;
            animation-delay: 0.6s;
            animation-play-state: paused;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cover Photo Section */
        .cover-section {
            width: 100%;
            height: 25vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1a252f 0%, #0d1117 100%);
        }

        .cover-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.3);
        }

        .cover-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
        }

        .cover-content h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .cover-content p {
            font-size: 1.3rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 3rem 3rem 2rem;
        }

        /* Wider container specifically for projects section */
        #home .container {
            max-width: 1800px;
            padding: 3rem 4rem 2rem;
        }

        /* Page Sections */
        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 3rem;
            justify-content: center;
        }

        @media (max-width: 1400px) {
            .projects-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .projects-grid.filtered .project-card {
                flex-basis: 320px;
                width: 320px;
                max-width: 400px;
            }
        }

        @media (max-width: 1024px) {
            .projects-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .projects-grid.filtered .project-card {
                flex-basis: 320px;
                width: 320px;
                max-width: 450px;
            }
        }

        .project-card {
            background: white;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.4s ease, box-shadow 0.4s ease, opacity 0.4s ease;
            cursor: pointer;
            position: relative;
            min-width: 280px;
            will-change: transform, opacity;
            opacity: 0;
            transform: translateY(30px);
        }

        .project-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .project-card.animation-complete {
            will-change: auto;
        }

        .project-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        /* Mobile-specific scroll animation */
        @media (max-width: 768px) {
            .project-card {
                opacity: 0;
                transform: translateY(50px) scale(0.95);
                transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), 
                            opacity 0.6s ease,
                            box-shadow 0.4s ease;
            }

            .project-card.visible {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            .project-card.in-viewport {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .project-image {
            width: 100%;
            height: 250px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
            background-color: #f0f0f0;
        }

        .project-image.lazy {
            background-image: none !important;
        }

        .project-image.loaded {
            animation: fadeInImage 0.3s ease;
        }

        @keyframes fadeInImage {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .project-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .project-card:hover .project-image::before {
            background: rgba(0,0,0,0.2);
        }

        .project-text {
            padding: 1.5rem;
            text-align: center;
        }

        .project-text h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .project-text p {
            color: #666;
            line-height: 1.6;
        }

        /* About Section */
        .about-content {
            display: flex;
            gap: 3rem;
            align-items: flex-start;
            margin-bottom: 3rem;
        }

        .about-image {
            flex: 0 0 300px;
            text-align: center;
        }

        .about-photo {
            width: 300px;
            height: 300px;
            background: #ddd;
            background-size: cover;
            background-position: center;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.2rem;
        }

        .about-text {
            flex: 1;
            background: white;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .about-text h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #333;
        }

        .about-text p {
            line-height: 1.8;
            color: #666;
            margin-bottom: 1rem;
        }

        .custom-text {
            background: #f8f9fa;
            padding: 1.5rem;
            margin-top: 2rem;
            border-left: 4px solid #2c3e50;
        }

        /* Skills Section */
        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .skill-card {
            background: white;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            height: 100%;
            transition: all 0.3s ease;
        }

        .skill-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        .skill-image {
            width: 80px;
            height: 80px;
            background: #ddd;
            background-size: cover;
            background-position: center;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666666;
        }


        .skill-name {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .skill-proficiency {
            margin-bottom: 1rem;
        }

        .proficiency-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .proficiency-fill {
            height: 100%;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            transition: width 1s ease;
        }

        .proficiency-text {
            font-size: 0.9rem;
            color: #666;
            text-align: right;
        }

        .skill-description {
            color: #555;
            line-height: 1.6;
        }

        /* Contact Section */
        .contact-content {
            display: flex;
            gap: 3rem;
            align-items: flex-start;
            margin-bottom: 3rem;
        }

        .contact-image {
            flex: 0 0 300px;
            text-align: center;
        }

        .contact-photo {
            width: 300px;
            height: 300px;
            background-size: cover;
            background-position: center;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .contact-details {
            flex: 1;
            background: white;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .contact-details h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #333;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding: 0.5rem 0;
        }

        .contact-item strong {
            width: 120px;
            color: #333;
        }

        .contact-item a {
            color: #2c3e50;
            text-decoration: none;
        }

        .contact-item a:hover {
            text-decoration: underline;
        }

        /* Call to Action */
        .cta-section {
            background: white;
            padding: 3rem 2rem;
            text-align: center;
            margin-top: 3rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .cta-section h3 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #333;
        }

        .cta-section p {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 2rem;
        }

        .cta-buttons {
            display: flex;
            justify-content: flex-start;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-top: 0.5rem;
        }

        .cta-button {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: #fff;
            padding: 0.4rem 0.8rem;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.2s ease;
            display: inline-block;
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.08);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            letter-spacing: 0.1px;
            font-size: 0.8rem;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            filter: brightness(1.02);
            box-shadow: 0 10px 24px rgba(0,0,0,0.28);
        }

        /* Unified Footer */
        .unified-footer {
            background: white;
            color: #333;
            padding: 1.5rem 2rem;
            margin-top: 2rem;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            align-items: center;
        }

        .footer-cta {
            text-align: left;
        }

        .footer-cta h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #333;
        }

        .footer-cta p {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .footer-social {
            text-align: right;
        }

        .social-links {
            display: flex;
            justify-content: flex-end;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.5rem;
        }

        .social-link {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: #333;
            text-decoration: none;
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .social-link:hover {
            color: #2c3e50;
            transform: translateY(-1px);
        }

        .social-icon {
            width: 30px;
            height: 30px;
            background: #34495e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        /* Experience Timeline */
        .timeline { position: relative; margin: 2rem 0 3rem; padding-left: 1.2rem; }
        .timeline::before { content: ''; position: absolute; left: 0.4rem; top: 0; bottom: 0; width: 2px; background: #dfe6e9; }
        .timeline-item { position: relative; margin-bottom: 1.5rem; background: #fff; padding: 1rem 1.2rem; box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
        .timeline-item::before { content: ''; position: absolute; left: -0.1rem; top: 1rem; width: 10px; height: 10px; border-radius: 50%; background: #34495e; }
        .timeline-item h4 { margin-bottom: 0.2rem; color: #2c3e50; }
        .timeline-item .meta { color: #666; font-size: 0.95rem; margin-bottom: 0.6rem; }
        .timeline-item ul { margin-left: 1rem; color: #444; }

        /* Contact form */
        .contact-form { margin-top: 1.5rem; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-group { display: flex; flex-direction: column; margin-bottom: 1rem; }
        .form-group label { font-weight: 600; margin-bottom: 0.4rem; color: #333; }
        .form-group input, .form-group textarea { padding: 0.75rem 0.9rem; border: 1px solid #dcdcdc; background: #fafafa; }
        .form-actions { margin-top: 0.5rem; }
        .submit-button { border: none; cursor: pointer; }

        /* Filter Bar */
        .filter-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0 2rem;
        }
        .filter-button {
            background: #ecf0f1;
            color: #2c3e50;
            border: 1px solid #dfe6e9;
            padding: 0.55rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-radius: 999px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        .filter-button:hover { filter: brightness(0.98); transform: translateY(-1px); }
        .filter-button.active {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: #fff;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        /* Project centering after filter - works for any number of cards */
        .projects-grid.filtered {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1.5rem;
            max-width: 100%;
        }
        
        .projects-grid.filtered .project-card {
            width: 350px;
            max-width: 420px;
            flex-grow: 1;
            flex-shrink: 1;
            flex-basis: 350px;
        }
        
        /* Ensure max 4 cards per row on large screens */
        @media (min-width: 1800px) {
            .projects-grid.filtered .project-card {
                flex-basis: calc(25% - 1.125rem);
                max-width: 420px;
            }
        }

        /* Courses & Progress Section Styles */
        .roadmap-intro {
            text-align: center;
            max-width: 800px;
            margin: 0 auto 4rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .roadmap-intro h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #2c3e50, #34495e);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            color: #2c3e50; /* fallback */
        }

        .roadmap-intro p {
            font-size: 1.2rem;
            color: #666;
            line-height: 1.6;
        }

        /* Roadmap Timeline */
        .roadmap-timeline {
            --green-height: 0%; /* default value so bar is not broken */
            position: relative;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 0;
        }

        /* Central timeline line */
        .roadmap-timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #e0e0e0;
            transform: translateX(-50%);
            border-radius: 2px;
            box-shadow: 0 0 15px rgba(44, 62, 80, 0.2);
        }

        /* Green progress line overlay */
        .roadmap-timeline::after {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            width: 4px;
            background: linear-gradient(180deg, #28a745, #20c997);
            transform: translateX(-50%);
            border-radius: 2px;
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.3);
            transition: height 8s ease;
            height: var(--green-height, 0%);
        }

        .roadmap-item {
            position: relative;
            margin-bottom: 4rem;
            width: 100%;
            display: flex;
            align-items: center;
        }

        .roadmap-item.left {
            justify-content: flex-end;
        }

        .roadmap-item.right {
            justify-content: flex-start;
        }

        .roadmap-card {
            background: white;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            position: relative;
            width: 45%;
            height: 100%;
        }

        .roadmap-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
        }

        /* Status indicators */
        .roadmap-card.active {
            border-left: 5px solid #2c3e50;
        }

        .roadmap-card.upcoming {
            border-left: 5px solid #3498db;
        }

        .roadmap-card.planned {
            border-left: 5px solid #5d6d7e;
        }

        .roadmap-card.tbd {
            border-left: 5px solid #5d6d7e;
        }

        .roadmap-card-tbd {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
        }

        .roadmap-card-tbd .tbd-content {
            font-size: 3rem;
            font-weight: 700;
            color: #5d6d7e;
            letter-spacing: 0.15em;
        }

        /* Timeline dot */
        .roadmap-item::before {
            content: '';
            position: absolute;
            left: 50%;
            width: 20px;
            height: 20px;
            background: white;
            border: 4px solid #2c3e50;
            border-radius: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 15px rgba(44, 62, 80, 0.3);
            z-index: 2;
        }

        .roadmap-item.active::before {
            background: #2c3e50;
            border-color: #2c3e50;
            box-shadow: 0 0 15px rgba(44, 62, 80, 0.3);
        }

        .roadmap-item.upcoming::before {
            background: #3498db;
            border-color: #3498db;
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.3);
        }

        .roadmap-item.planned::before {
            background: #5d6d7e;
            border-color: #5d6d7e;
        }

        .roadmap-item.tbd::before {
            background: #5d6d7e;
            border-color: #5d6d7e;
        }

        /* Course icon */
        .course-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .course-header h3 {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }

        .course-platform {
            font-size: 1rem;
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .course-category {
            display: inline-block;
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .course-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .course-status {
            margin-bottom: 1.5rem;
        }

        .status-badge {
            display: inline-block;
            padding: 0.35rem 0.9rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: capitalize;
        }

        .status-badge.status-active {
            background: #2c3e50;
            color: white;
        }

        .status-badge.status-upcoming {
            background: #3498db;
            color: white;
        }

        .status-badge.status-planned {
            background: #5d6d7e;
            color: white;
        }

        .course-skills {
            margin-bottom: 1.5rem;
        }

        .skills-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.8rem;
            font-weight: 600;
        }

        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
        }

        .skill-tag {
            background: rgba(44, 62, 80, 0.1);
            color: #2c3e50;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            border: 1px solid rgba(44, 62, 80, 0.2);
            transition: all 0.3s ease;
        }

        .skill-tag:hover {
            background: rgba(44, 62, 80, 0.2);
            transform: translateY(-2px);
        }

        .credit-line {
            font-size: 0.8rem;
            color: #888;
            text-align: right;
            margin-top: 0.5rem;
        }

        /* Learning Goals - keeping same style */
        .learning-goals {
            background: linear-gradient(145deg, #f8f9fa, #ffffff);
            border-radius: 0;
            padding: 2rem;
            margin-top: 4rem;
            border-left: 5px solid #2c3e50;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .learning-goals h3 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
            text-align: center;
        }

        .goals-list {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        .goals-list li {
            padding: 1rem;
            background: rgba(44, 62, 80, 0.05);
            border-radius: 0;
            position: relative;
            padding-left: 3rem;
            color: #555;
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .goals-list li:hover {
            background: rgba(44, 62, 80, 0.1);
            transform: translateY(-2px);
        }

        .goals-list li::before {
            content: '';
            position: absolute;
            left: 1rem;
            font-size: 1.5rem;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            background: linear-gradient(45deg, #2c3e50, #34495e);
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .modal-header h2 {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.3);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-images {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .modal-image {
            width: 100%;
            height: 150px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            transition: transform 0.3s ease;
            background-color: #f0f0f0;
        }

        .modal-image:hover {
            transform: scale(1.05);
        }

        .modal-text {
            line-height: 1.8;
            color: #444;
        }

        .modal-text h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        /* Fullscreen image navigation styles */
        #fullscreen-prev:hover,
        #fullscreen-next:hover {
            background: linear-gradient(45deg, #34495e, #2c3e50) !important;
            transform: translateY(-50%) scale(1.1) !important;
            box-shadow: 0 6px 20px rgba(44,62,80,0.6) !important;
        }

        .hero-carousel-desktop {
            display: block;
        }

        .hero-carousel-mobile {
            display: none;
        }


    /* Very wide screens - full PC screens only */
    @media (min-width: 1600px) {
        .nav-links {
            gap: 2.5rem;
        }
        
        .nav-links a {
            font-size: 1.1rem;
            padding: 0.5rem 0.5rem;
        }
    }

    /* Responsive Design */
@media (max-width: 768px) {
    .hero-carousel-desktop {
        display: none;
        }

    .hero-carousel-mobile {
        display: block;
        }

    /* Opaque navbar at top, transparent when scrolled on mobile */
    .navbar {
        background: rgba(255, 255, 255, 1);
        backdrop-filter: blur(10px);
    }

    .navbar.scrolled {
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(15px);
    }

    .container,
    #home .container {
        padding: 2rem 1.5rem;
        max-width: 100%;
    }

    .projects-grid {
        grid-template-columns: 1fr !important;
        justify-items: center;
    }
    
    .projects-grid .project-card {
        max-width: 500px;
        width: 100%;
    }
    
    .projects-grid.filtered {
        display: grid !important;
    }
    
    .projects-grid.filtered .project-card {
        width: 100%;
        max-width: 500px;
        flex-basis: unset;
    }

    .skills-grid {
        grid-template-columns: 1fr;
    }

    /* Fixed About and Contact sections for mobile */
    .about-content,
    .contact-content {
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    /* Only center titles, not body text */
    .about-content h2,
    .contact-content h2 {
        text-align: center;
    }
    .about-image,
    .contact-image {
        flex: none;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    /* Consistent photo sizing and centering for both about and contact */
    .about-photo,
    .contact-photo {
        width: 250px;
        height: 250px;
        margin: 0 auto 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }

    .cover-content h1 {
        font-size: 2rem;
    }

    .cover-content p {
        font-size: 1.1rem;
    }

    .modal-content {
        width: 100vw !important;
        height: 100vh !important;
        max-width: 100vw !important;
        max-height: 100vh !important;
        margin: 0 !important;
        border-radius: 0 !important;
        padding: 0 !important;
        box-shadow: none !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
    }

    .modal-body {
        padding: 2rem 1.5rem 4rem 1.5rem !important; /* Extra bottom padding for mobile */
    }

    .modal .close {
        position: fixed !important;
        top: 20px !important;
        right: 20px !important;
        z-index: 2010 !important; /* higher than modal-content */
        background: rgba(0,0,0,0.3);
        color: white;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
    }

    .cta-buttons {
        flex-direction: column;
        align-items: center;
    }

    .unified-footer {
        padding: 1rem 1.5rem;
        margin-top: 1.5rem;
    }

    .footer-content {
        grid-template-columns: 1fr;
        gap: 1.5rem;
        text-align: center;
    }

    .footer-cta {
        text-align: center;
    }

    .footer-cta h3 {
        font-size: 1.1rem;
        margin-bottom: 0.3rem;
    }

    .footer-cta p {
        font-size: 0.85rem;
        margin-bottom: 0.5rem;
        line-height: 1.6;
    }

    .cta-buttons {
        justify-content: center;
        margin-top: 0.3rem;
    }

    .footer-cta .cta-button {
        font-size: 0.75rem;
        padding: 0.3rem 0.6rem;
    }

    .footer-social {
        text-align: center;
    }

    .social-links {
        justify-content: center;
        flex-direction: row;
        gap: 1.5rem;
        margin-bottom: 0.3rem;
    }

    .credit-line {
        text-align: center;
        font-size: 0.75rem;
        margin-top: 0.3rem;
    }

    /* Center mobile navigation links */
    .nav-links a {
        justify-content: center;
        text-align: center;
        width: 100%;
    }

    .filter-bar { justify-content: center; }

    .form-row { grid-template-columns: 1fr; }

    /* Courses & Progress responsive */
    .roadmap-intro {
        margin: 0 1rem 2rem;
        padding: 1.5rem;
    }

    .roadmap-intro h2 {
        font-size: 2rem;
    }

    .roadmap-timeline::before {
        left: 2rem;
        width: 3px;
        transform: none;
    }

    .roadmap-timeline::after {
        left: 2rem;
        width: 3px;
        transform: none;
    }

    .roadmap-item {
        margin-bottom: 3rem;
        justify-content: flex-start !important;
    }

    .roadmap-item::before {
        left: 2rem;
        width: 15px;
        height: 15px;
        border-width: 3px;
    }

    .roadmap-card {
        width: calc(100% - 4rem);
        margin-left: 4rem;
        padding: 1.5rem;
    }

    .course-icon {
        font-size: 2.5rem;
    }

    .learning-goals {
        margin: 2rem 1rem 0;
        padding: 1.5rem;
    }

    .goals-list {
        grid-template-columns: 1fr;
    }

    /* Mobile Navigation */
    .nav-links {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(255, 255, 255, 0.54);
        backdrop-filter: blur(15px);
        flex-direction: column;
        padding: 0 2rem;
        box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        gap: 1rem;
        /* Improve touch handling on mobile */
        -webkit-overflow-scrolling: touch;
        /* Center the navigation items */
        align-items: center;
        text-align: center;
        z-index: 999;
        max-height: 0;
        overflow: hidden;
        opacity: 0;
        transition: max-height 0.4s ease, opacity 0.4s ease, padding 0.4s ease;
    }

    .nav-links.active {
        display: flex;
        max-height: 500px;
        opacity: 1;
        padding: 1rem 2rem;
    }

    /* Large desktop screens */
    @media (max-width: 1400px) and (min-width: 1201px) {
        .nav-links {
            gap: 1.1rem;
        }
        
        .nav-links a {
            padding: 0.5rem 0.1rem;
            font-size: 0.98rem;
        }

        /* Ensure green line stays centered on large screens */
        .roadmap-timeline::before {
            left: 50%;
            transform: translateX(-50%);
        }

        .roadmap-timeline::after {
            left: 50%;
            transform: translateX(-50%);
        }
    }

    /* Tablet and medium screen improvements */
    @media (max-width: 1200px) and (min-width: 769px) {
        .nav-links {
            gap: 0.8rem;
        }
        
        .nav-links a {
            padding: 0.5rem 0.1rem;
            font-size: 0.9rem;
        }
        
        .logo {
            font-size: 1.3rem;
        }

        /* Fix green line positioning on tablets */
        .roadmap-timeline::before {
            left: 2rem;
            transform: none;
        }

        .roadmap-timeline::after {
            left: 2rem;
            transform: none;
        }
    }

    /* iPad specific improvements */
    @media (max-width: 1024px) and (min-width: 768px) {
        .nav-links a {
            padding: 0.75rem 0;
            font-size: 1.1rem;
        }
        
        .mobile-menu {
            display: flex;
        }
    }

    /* Small tablets and landscape phones */
    @media (max-width: 900px) and (min-width: 600px) {
        .nav-links {
            gap: 0.75rem;
        }
        
        .nav-links a {
            padding: 0.5rem 0.1rem;
            font-size: 0.9rem;
        }
        
        .logo {
            font-size: 1.2rem;
        }
    }

    .mobile-menu {
        display: flex;
    }

    .mobile-menu.active span:nth-child(1) {
        transform: rotate(45deg) translate(5px, 5px);
    }

    .mobile-menu.active span:nth-child(2) {
        opacity: 0;
    }

        .mobile-menu.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -6px);
        }

        /* Mobile menu backdrop blur */
        .mobile-menu-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0);
            z-index: 998;
            opacity: 0;
            visibility: hidden;
            transition: background 0.4s ease, opacity 0.4s ease, visibility 0.4s;
            pointer-events: none;
        }

        .mobile-menu-backdrop.active {
            background: rgba(0, 0, 0, 0.3);
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }

        /* Apply blur to page sections when menu is open */
        .page-section {
            transition: filter 0.4s ease;
            min-height: 100vh; /* Prevent background shift when content changes */
        }

        body.mobile-menu-open .page-section {
            filter: blur(8px);
        }
    }
    </style>
</head>
<body>

    
<!-- Mobile Menu Backdrop -->
<div class="mobile-menu-backdrop" id="mobile-backdrop"></div>

<!-- Sticky Navigation -->
<nav class="navbar">
    <div class="nav-container">
        <a href="#home" class="logo">Alward Hafez</a>
        <ul class="nav-links">
            <li><a href="#home" class="nav-link" data-section="home">Home</a></li>
            <li><a href="#experience" class="nav-link" data-section="experience">Experience</a></li>
            <li><a href="#skills" class="nav-link" data-section="skills">Skills</a></li>
            <li><a href="#about" class="nav-link" data-section="about">About Me</a></li>
            <li><a href="#contact" class="nav-link" data-section="contact">Contact</a></li>
        </ul>
        <div class="mobile-menu" data-mobile-toggle="true">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</nav>

<!-- Home Section -->
<div id="home" class="page-section active">
    <!-- Desktop Carousel -->
    <div class="hero-carousel hero-carousel-desktop swiper" id="desktop-swiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide" style="background-image: url('images/pc_hero1.webp');"></div>
        <div class="swiper-slide" style="background-image: url('images/pc_hero2.webp');"></div>
        <div class="swiper-slide" style="background-image: url('images/pc_hero3.webp');"></div>
    </div>
    <div class="swiper-pagination" id="desktop-pagination"></div>
    </div>

    <!-- Mobile Carousel  you can change the photo fot the mobile   -->
    <div class="hero-carousel hero-carousel-mobile swiper" id="mobile-swiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide" style="background-image: url('images/pc_hero1.webp');"></div>
        <div class="swiper-slide" style="background-image: url('images/pc_hero2.webp');"></div>
        <div class="swiper-slide" style="background-image: url('images/pc_hero3.webp');"></div>
    </div>
    <div class="swiper-pagination" id="mobile-pagination"></div>
    </div>

    <div class="carousel-dots" id="carousel-dots"></div>

    <!-- Cover Photo Section -->
    <div class="cover-section fade-in">
        <div class="cover-overlay"></div>
        <div class="cover-content">
            <h1>Alward Hafez Portfolio</h1>
            <p>Explore my projects and innovations</p>
        </div>
    </div>

    <div class="container fade-in-delayed">
        <div class="filter-bar" id="filter-bar"></div>
        <div class="projects-grid fade-in-slow" id="projects-container">
            <!-- Projects will be loaded dynamically -->
        </div>
    </div>

</div>

<!-- Courses & Progress Section -->
<div id="courses-progress" class="page-section">
    <div class="cover-section fade-in">
        <div class="cover-overlay"></div>
        <div class="cover-content">
            <h1>Courses & Progress</h1>
            <p>My learning roadmap and continuous development</p>
        </div>
    </div>

    <div class="container fade-in-delayed">


        <div class="roadmap-timeline" id="roadmap-container">
            <!-- Roadmap items will be loaded dynamically -->
        </div>

        <div class="learning-goals" id="learning-goals-container">
            <!-- Learning goals will be loaded dynamically -->
        </div>
    </div>

</div>

    <!-- About Section -->
    <div id="about" class="page-section">
        <div class="cover-section fade-in">
            <div class="cover-overlay"></div>
            <div class="cover-content">
                <h1>About Me</h1>
                <p>Learn more about my background</p>
            </div>
        </div>

        <div class="container fade-in-delayed">
            <div class="about-content">
                <div class="about-image">
                    <div class="about-photo" style="background-image: url('images/profile.webp')">
                    </div>
                </div>
                <div class="about-text">
                    <h2>Hello, I'm Alward Hafez</h2>
                    <p>Recent Mechatronics Engineering graduate from UCSI University in Malaysia, with hands on experience in robotics, smart agriculture, AI based image processing, and IoT system development. I’ve completed multiple internships and projects, including an AI based helmet detection system and a smart palm tree monitoring platform using YOLOv8 and Google Cloud.</p>
                    <p> At Control Easy Technology Sdn Bhd, as a Research and Development Engineer, I applied problem-solving to enhance product development, leveraging my expertise in mechatronics. The experience enriched my capacity to devise solutions that bridge the gap between theoretical knowledge and practical application.</p>

                    
                    <div class="custom-text quote-fade">
                        <strong>"Nothing’s scary if you face it first." — GT</strong>
                        <br>
                        <em>Fear only lives in what we haven’t faced yet</em>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <!-- Experience Section -->
    <div id="experience" class="page-section">
        <div class="cover-section fade-in">
            <div class="cover-overlay"></div>
            <div class="cover-content">
                <h1>Experience</h1>
                <p>Roles, internships, and impactful contributions</p>
            </div>
        </div>

        <div class="container fade-in-delayed">
            <div class="timeline" id="experience-container">
                <!-- Experience items will be loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Skills Section -->
    <div id="skills" class="page-section">
        <div class="cover-section fade-in">
            <div class="cover-overlay"></div>
            <div class="cover-content">
                <h1>My Skills</h1>
                <p>My technical skill set</p>
            </div>
        </div>

        <div class="container fade-in-delayed">
            <div class="skills-grid" id="skills-container">
                <!-- Skills will be loaded dynamically -->
            </div>
        </div>

    </div>

    <!-- Contact Section -->
    <div id="contact" class="page-section">
        <div class="cover-section fade-in">
            <div class="cover-overlay"></div>
            <div class="cover-content">
                <h1>Let's Get in Touch</h1>
                <p>Let's discuss your next project or collaboration</p>
            </div>
        </div>

        <div class="container fade-in-delayed">
            <div class="contact-content">
                <div class="contact-image">
                    <div class="contact-photo" style="background-image: url('images/contact.png')">
                    </div>
                </div>
                <div class="contact-details">
                    <h2>Let's Connect</h2>
                    <div class="contact-item">
                        <strong>Email:</strong>
                        <a href="mailto:Alward.hafez.01@gmail.com">Alward.hafez.01@gmail.com</a>
                    </div>
                    <div class="contact-item">
                        <strong>Phone:</strong>
                        <a href="tel:+966581192214">+966 581192214</a>
                    </div>
                    <div class="contact-item">
                        <strong>LinkedIn:</strong>
                        <a href="https://www.linkedin.com/in/Alward-Hafez-24b1541b1/" target="_blank">linkedin.com/in/AlwardHafez</a>
                    </div>
                    <div class="contact-item">
                        <strong>GitHub:</strong>
                        <a href="https://github.com/AlwardHafez" target="_blank">github.com/AlwardHafez</a>
                    </div>
                    <div class="contact-item">
                        <strong>Location:</strong>
                        <span>Riyadh, Saudi Arabia</span>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <!-- Unified Footer -->
    <div class="unified-footer">
        <div class="footer-content">
            <div class="footer-cta">
                <h3>Let's Build Something Great</h3>
                <p>Let's discuss how I can help bring your ideas to life.</p>
                <div class="cta-buttons">
                    <a href="#contact" class="cta-button">Start a Project</a>
                    <a href="#home" class="cta-button">View My Projects</a>
                </div>
            </div>
            
            <div class="footer-social">
                <div class="social-links">
                    <a href="mailto:Alward.hafez.01@gmail.com" class="social-link">
                        <span>Email</span>
                    </a>
                    <a href="https://www.linkedin.com/in/Alward-Hafez-24b1541b1/" target="_blank" class="social-link">
                        <span>LinkedIn</span>
                    </a>
                    <a href="https://github.com/AlwardHafez" target="_blank" class="social-link">
                        <span>GitHub</span>
                    </a>
                </div>
                
                <div class="credit-line">
                    <span>
                        Designed by Alward Hafez. Icons by 
                        <a href="https://icons8.com/" target="_blank" style="color: inherit; text-decoration: underline;">Icons8</a>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Project Modals will be generated dynamically -->
    <div id="modals-container"></div>


    <div id="fullscreen-image-overlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.95); z-index:2000; justify-content:center; align-items:center;">
        <span id="fullscreen-close" style="position:absolute;top:30px;right:30px;font-size:40px;color:white;cursor:pointer;z-index:10; background:rgba(0,0,0,0.2); width:40px; height:40px; display:flex; align-items:center; justify-content:center; border-radius:50%;">&times;</span>
        <button id="fullscreen-prev" style="position:absolute; left:30px; top:50%; transform:translateY(-50%); background:linear-gradient(45deg, #2c3e50, #34495e); border:none; color:white; font-size:40px; width:50px; height:50px; border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.3s ease; z-index:10; box-shadow:0 4px 12px rgba(44,62,80,0.4);">‹</button>
        <button id="fullscreen-next" style="position:absolute; right:30px; top:50%; transform:translateY(-50%); background:linear-gradient(45deg, #2c3e50, #34495e); border:none; color:white; font-size:40px; width:50px; height:50px; border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.3s ease; z-index:10; box-shadow:0 4px 12px rgba(44,62,80,0.4);">›</button>
        <img id="fullscreen-image" src="" style="max-width:85vw; max-height:85vh; box-shadow:0 0 30px #000; cursor:default;">
        <div id="fullscreen-counter" style="position:absolute; bottom:30px; left:50%; transform:translateX(-50%); color:white; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:20px; font-size:14px; z-index:10;"></div>
    </div>

    <script>

        // Portfolio data - projects embedded directly for performance
        let portfolioData = {
            projects: [
                {
                    "id": 1,
                    "title": "Robotic Arm: 6 Degree of Freedom Gesture-Controlled System",
                    "description": "A modern robotics project with advanced control systems and precision movement.",
                    "image": "images/project1.webp",
                    "category": "Robotics, Computer Vision , R&D",
                    "detailImages": ["images/project1.webp", "images/project1-detail2.webp", "images/project1-detail3.webp"],
                    "overview": "This robotics project showcases advanced control systems and precision engineering. The robot arm features multiple degrees of freedom and can perform complex tasks with high accuracy.",
                    "features": [
                        "Developed a 6-DOF robotic arm controlled by real-time hand tracking.",
                        "Implemented gesture detection using Python and OpenCV.",
                        "Designed the interaction loop between visual input and arm movement.",
                        "Demonstrated real-world application of computer vision in robotics.",
                        "Built a scalable and modular structure for further development.",
                        "Tested for responsiveness and accuracy in various lighting conditions."
                    ],
                    "technologies": "Python, OpenCV, Arduino, Servo Motors, Robotics"
                },
                {
                    "id": 7,
                    "title": "Interactive Modular Dashboard for IoT and Smart Control",
                    "description": "A unified and adaptive web-based dashboard for IoT monitoring, smart control, and service management.",
                    "image": "images/project7.webp",
                    "category": "IoT",
                    "detailImages": ["images/project7.webp", "images/project7-detail2.webp", "images/project7-detail3.webp","images/project7-detail4.webp","images/project7-detail5.webp","images/project7-detail6.webp","images/project7-detail7.webp"],
                    "overview": "This dashboard was designed to unify control and monitoring across different projects, from car detailing booking systems to IoT and robotics applications. Built with modular widgets and scalable architecture, it enables users to visualize sensor data, manage operations, and control connected devices in real time. Its flexibility makes it suitable for both commercial and engineering use cases.  Additional features, including integrated device control for robotics and a scalable backend with full IoT protocol support, are under development",
                    "features": [
                        "Modular widget system adapts to different usage scenarios, or even just user preferences.",
                        "Real-time data visualization and interactive charts for sensor monitoring.",
                        "Built-in booking and scheduling logic for business or customer oriented workflows.",
                        "Secure restricted mode for privacy and controlled access.",
                        "Unified and responsive UI designed for both desktop and mobile use.",
                        "Integrated device control interface for robotics and automation systems (in progress).",
                        "Scalable backend architecture supporting API and IoT protocol integration (in progress)."
                    ],
                    "technologies": "Web development, IoT integration, UI/UX design"
                },
                {
                    "id": 2,
                    "title": "Portable Real-Time Monitoring System for Palm Tree",
                    "description": "A smart agriculture system for monitoring palm tree health and growth using AI and IoT.",
                    "image": "images/project3.webp",
                    "category": "IoT, Computer Vision, 3D design, R&D, Smart Agriculture",
                    "detailImages": ["images/project3.webp", "images/project3-detail2.webp", "images/project3-detail3.webp", "images/project3-detail4.webp", "images/project3-detail5.webp", "images/project3-detail6.webp"],
                    "overview": "In August 2024, I developed a portable real-time monitoring system focused on palm trees for smart agriculture applications. The system collects environmental and growth data and provides alerts to caretakers. It also uses a YOLOv8 segmentation model to analyze plant growth from images and integrates with a cloud-based IoT platform for live monitoring and management.",
                    "features": [
                        "Developed a portable real-time system to monitor palm tree environmental and growth parameters.",
                        "Trained and deployed a YOLOv8 segmentation model to analyze plant growth through pixel analysis.",
                        "Designed an interactive IoT dashboard using Google Cloud for live monitoring and alerts.",
                        "Integrated Raspberry Pi with multiple sensors for real-time data acquisition.",
                        "Enabled remote plant management with visual insights and alert thresholds.",
                        "Focused on supporting sustainable smart agriculture practices."
                    ],
                    "technologies": "YOLOv8, Raspberry Pi, Google Cloud, Python, IoT, Computer Vision"
                },
                {
                    "id": 3,
                    "title": "Holistic and Integrated Smart System for Safeguarding Motorcyclists",
                    "description": "An AI and IoT-based safety system to monitor helmet use and riding behavior for improved motorcyclist safety.",
                    "image": "images/project2.webp",
                    "category": "IoT, Computer Vision,3D design,  R&D, Safety Systems",
                    "detailImages": ["images/project2-detail1.webp", "images/project2-detail2.webp", "images/project2-detail3.webp"],
                    "overview": "In April 2024, I worked on a smart safety system for motorcyclists combining object detection, sensor integration, and IoT. A YOLOv8 model was trained to detect helmet usage in real-time, while onboard sensors monitored riding behavior such as acceleration, braking, and lean angle. The system provided employers with actionable insights through a live IoT dashboard.",
                    "features": [
                        "Trained a YOLOv8 object detection model to ensure motorcyclists are wearing helmets.",
                        "Monitored acceleration, braking, and lean angle using integrated sensors.",
                        "Developed an IoT platform for real-time data collection and analysis.",
                        "Visualized riding performance through interactive dashboards.",
                        "Enabled employers to track and promote safer riding behavior.",
                        "Contributed to reducing risks and improving road safety for motorcyclists."
                    ],
                    "technologies": "YOLOv8, IoT, Embedded Systems, Python, Sensor Integration"
                },
                {
                    "id": 4,
                    "title": "IMechE Training Series: Hands-On Robotics for University Students",
                    "description": "Led a robotics training series to teach students how to build and program a gesture-controlled robotic arm.",
                    "image": "images/project4.webp",
                    "category": "STEM Education, Robotics",
                    "detailImages": ["images/project4.webp", "images/project4-detail2.webp", "images/project4-detail3.webp"],
                    "overview": "Alongside the development of the robotic arm, I conducted a hands-on robotics training series in May 2023 at UCSI University. The series guided students through each stage of building the robotic system — from hardware to software — and helped them understand core principles of vision-based control and mechatronics.",
                    "features": [
                        "Prepared and delivered a structured robotics training series for students.",
                        "Explained key concepts like servo control, OpenCV tracking, and motion mapping.",
                        "Engaged participants with live demonstrations and build-along sessions.",
                        "Encouraged student experimentation and adaptation of the original project.",
                        "Used the robotic arm project as an educational tool and engineering mascot.",
                        "Strengthened my communication and mentoring skills in technical topics."
                    ],
                    "technologies": "Python, OpenCV, Arduino, Robotics, Presentation Tools"
                },
                {
                    "id": 5,
                    "title": "IoT Training Series: Real-Time Monitoring with Raspberry Pi and Google Cloud",
                    "description": "Co-led an IoT training series focused on building real-time sensor-based monitoring systems using Raspberry Pi and Google Sheets.",
                    "image": "images/project5.webp",
                    "category": "STEM Education, IoT ",
                    "detailImages": ["images/project5.webp", "images/project5-detail2.webp"],
                    "overview": "As part of my internship at Control Easy Technology in late 2023, I collaborated with my supervisor to design and deliver an IoT training program for external clients. The training focused on building real-time monitoring systems using Raspberry Pi, various sensors, and integration with Google Cloud and Google Sheets. I created instructional materials and led hands-on sessions to guide participants through system setup, data flow, and cloud-based visualization.",
                    "features": [
                        "Designed and delivered IoT training sessions using Raspberry Pi and sensors.",
                        "Demonstrated real-time data collection and cloud integration with Google Sheets.",
                        "Created clear and engaging instructional materials for technical and non-technical audiences.",
                        "Conducted live sessions, assisting participants in building and testing their systems.",
                        "Enabled attendees to deploy their own monitoring systems for practical use.",
                        "Focused on low-cost, scalable IoT solutions for beginners and professionals alike."
                    ],
                    "technologies": "Raspberry Pi, Sensors, Google Sheets, Google Cloud, Python"
                },
                {
                    "id": 6,
                    "title": "Modular Prototyping Box for Multi-Project Applications",
                    "description": "A reusable and customizable 3D-printed enclosure designed to accelerate prototyping for R&D.",
                    "image": "images/project6.webp",
                    "category": "3D design, R&D",
                    "detailImages": ["images/project6.webp", "images/project6-detail2.webp", "images/project6-detail3.webp"],
                    "overview": "From May 2023 to August 2024, I designed and 3D printed a modular enclosure to support rapid development and testing of electronic systems. The box accommodated various sensors, microcontrollers, and components, and was reused across five unique projects, proving its effectiveness and adaptability.",
                    "features": [
                        "3D printed a versatile and aesthetically pleasing modular box to house sensors, microcontrollers, and other components.",
                        "Expandable through modular design for different project needs.",
                        "Successfully used in five distinct electronics projects.",
                        "Saves prototyping time and improves workflow efficiency.",
                        "Tool-free assembly and easy internal reconfiguration.",
                        "Designed with both functionality and visual appeal in mind."
                    ],
                    "technologies": "3D design, 3D printing"
                }
            ],
            skills: [],
            coursesProgress: null,
            experience: null,
            site: null,
            about: null,
            contact: null
        };

        async function loadData() {
            try {
                console.log('Loading JSON data...');
                
                // Load JSON files (projects already embedded in page)
                const [siteRes, aboutRes, skillsRes, coursesRes, contactRes, experienceRes] = await Promise.all([
                    fetch('data/site.json', { cache: 'no-cache' }),
                    fetch('data/about.json', { cache: 'no-cache' }),
                    fetch('data/skills.json', { cache: 'no-cache' }),
                    fetch('data/courses-progress.json', { cache: 'no-cache' }),
                    fetch('data/contact.json', { cache: 'no-cache' }),
                    fetch('data/experience.json', { cache: 'no-cache' })
                ]);

                // Check if all requests were successful
                if (!siteRes.ok || !aboutRes.ok || !skillsRes.ok || !coursesRes.ok || !contactRes.ok || !experienceRes.ok) {
                    throw new Error('One or more JSON files failed to load');
                }

                // Parse JSON responses
                portfolioData.site = (await siteRes.json()).site;
                portfolioData.about = (await aboutRes.json()).about;
                // portfolioData.projects already embedded in page
                portfolioData.skills = (await skillsRes.json()).skills;
                portfolioData.coursesProgress = (await coursesRes.json()).coursesProgress;
                portfolioData.contact = (await contactRes.json()).contact;
                portfolioData.experience = (await experienceRes.json()).experience;
                
                console.log('JSON data loaded successfully:', portfolioData);

                // Apply site content
                const titleEl = document.querySelector('#home .cover-content h1');
                const subEl = document.querySelector('#home .cover-content p');
                if (portfolioData.site) {
                    if (portfolioData.site.heroTitle && titleEl) titleEl.textContent = portfolioData.site.heroTitle;
                    if (portfolioData.site.heroSubtitle && subEl) subEl.textContent = portfolioData.site.heroSubtitle;
                }

                // Apply about content
                if (portfolioData.about) {
                    const aboutH2 = document.querySelector('#about .about-text h2');
                    if (portfolioData.about.greeting && aboutH2) aboutH2.textContent = portfolioData.about.greeting;
                    if (Array.isArray(portfolioData.about.paragraphs)) {
                        const aboutText = document.querySelector('#about .about-text');
                        const existingParas = aboutText.querySelectorAll('p');
                        existingParas.forEach(p => p.remove());
                        const anchor = aboutText.querySelector('h2');
                        portfolioData.about.paragraphs.forEach(t => {
                            const p = document.createElement('p');
                            p.textContent = t;
                            anchor.insertAdjacentElement('afterend', p);
                        });
                    }
                    if (portfolioData.about.quote) {
                        const quoteBox = document.querySelector('#about .custom-text');
                        if (quoteBox) quoteBox.innerHTML = `<strong>"${portfolioData.about.quote.text}" — ${portfolioData.about.quote.author}</strong><br><em>${portfolioData.about.quote.sub || ''}</em>`;
                    }
                }

                // Apply contact content
                if (portfolioData.contact) {
                    const emailLink = document.querySelector('#contact a[href^="mailto:"]');
                    const phoneLink = document.querySelector('#contact a[href^="tel:"]');
                    const linkedinLink = document.querySelector('#contact a[href*="linkedin"]');
                    const githubLink = document.querySelector('#contact a[href*="github.com"]');
                    const locSpan = document.querySelector('#contact .contact-item span');
                    const form = document.querySelector('#contact form.contact-form');
                    if (portfolioData.contact.email && emailLink) { emailLink.href = `mailto:${portfolioData.contact.email}`; emailLink.textContent = portfolioData.contact.email; }
                    if (portfolioData.contact.phone && phoneLink) { phoneLink.href = `tel:${portfolioData.contact.phone.replace(/\s+/g,'')}`; phoneLink.textContent = portfolioData.contact.phone; }
                    if (portfolioData.contact.linkedin && linkedinLink) linkedinLink.href = portfolioData.contact.linkedin;
                    if (portfolioData.contact.github && githubLink) githubLink.href = portfolioData.contact.github;
                    if (portfolioData.contact.location && locSpan) locSpan.textContent = portfolioData.contact.location;
                    if (portfolioData.contact.formEndpoint && form) form.action = portfolioData.contact.formEndpoint;
                }

                // Preload all project images in the background immediately
                if (portfolioData.projects && Array.isArray(portfolioData.projects)) {
                    console.log('Preloading project images...');
                    portfolioData.projects.forEach(project => {
                        if (project.image) {
                            preloadImage(project.image).catch(() => {});
                        }
                        if (project.detailImages && Array.isArray(project.detailImages)) {
                            project.detailImages.forEach(img => {
                                preloadImage(img).catch(() => {});
                            });
                        }
                    });
                }
            } catch (err) {
                console.error('Failed to load JSON data files', err);
                // Fallback to embedded data
                portfolioData = {
                    projects: [
                        {
                            id: 1,
                            title: "Robotic Arm: 6 Degree of Freedom Gesture-Controlled System",
                            description: "A modern robotics project with advanced control systems and precision movement.",
                            image: "images/project1.webp",
                            category: "Robotics, Computer Vision, Embedded Systems",
                            detailImages: ["images/project1.webp", "images/project1-detail2.webp", "images/project1-detail3.webp"],
                            overview: "This robotics project showcases advanced control systems and precision engineering. The robot arm features multiple degrees of freedom and can perform complex tasks with high accuracy.",
                            features: [
                                "Developed a 6-DOF robotic arm controlled by real-time hand tracking.",
                                "Implemented gesture detection using Python and OpenCV.",
                                "Designed the interaction loop between visual input and arm movement.",
                                "Demonstrated real-world application of computer vision in robotics.",
                                "Built a scalable and modular structure for further development.",
                                "Tested for responsiveness and accuracy in various lighting conditions."
                            ],
                            technologies: "Python, OpenCV, Arduino, Servo Motors, Robotics"
                        }
                        // Add more projects as needed
                    ],
                    skills: [
                        {
                            id: 1,
                            name: "Microcontroller Programming & Hardware Integration",
                            proficiency: 80,
                            image: "images/skill1.png",
                            description: "I've designed and built embedded systems using Arduino and Raspberry Pi, integrating sensors, displays, motors, and communication protocols.",
                            learningPath: "Final Year Project, Integrated Design project, Robotic arm project"
                        }
                        // Add more skills as needed
                    ]
                };
            }
        }

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            const mobileMenu = document.querySelector('.mobile-menu');
            const backdrop = document.getElementById('mobile-backdrop');
            
            navLinks.classList.toggle('active');
            mobileMenu.classList.toggle('active');
            backdrop.classList.toggle('active');
            document.body.classList.toggle('mobile-menu-open');
            
            // Prevent body scroll when menu is open, preserve scrollbar space
            if (navLinks.classList.contains('active')) {
                // Get scrollbar width before hiding
                const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
                document.documentElement.style.setProperty('--scrollbar-width', scrollbarWidth + 'px');
                document.body.style.overflow = 'hidden';
                document.body.style.paddingRight = scrollbarWidth + 'px';
            } else {
                document.body.style.overflow = 'auto';
                document.body.style.paddingRight = '0px';
                document.documentElement.style.setProperty('--scrollbar-width', '0px');
            }
        }

        // Enhanced navigation event handler for touch devices
        function setupNavigationHandlers() {
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenu = document.querySelector('.mobile-menu');
            const backdrop = document.getElementById('mobile-backdrop');
            
            navLinks.forEach(link => {
                // Remove any existing event listeners
                link.removeEventListener('click', handleNavClick);
                link.removeEventListener('touchend', handleNavTouch);
                
                // Add click handler
                link.addEventListener('click', handleNavClick);
                
                // Add touch handler for mobile devices
                link.addEventListener('touchend', handleNavTouch, { passive: false });
            });

            // Set up mobile menu toggle
            if (mobileMenu) {
                mobileMenu.removeEventListener('click', handleMobileMenuClick);
                mobileMenu.removeEventListener('touchend', handleMobileMenuTouch);
                
                mobileMenu.addEventListener('click', handleMobileMenuClick);
                mobileMenu.addEventListener('touchend', handleMobileMenuTouch, { passive: false });
            }
            
            // Close menu when clicking backdrop
            if (backdrop) {
                backdrop.addEventListener('click', toggleMobileMenu);
            }
        }

        function handleMobileMenuClick(event) {
            event.preventDefault();
            toggleMobileMenu();
        }

        function handleMobileMenuTouch(event) {
            event.preventDefault();
            event.stopPropagation();
            toggleMobileMenu();
        }

        function handleNavClick(event) {
            event.preventDefault();
            const section = event.currentTarget.getAttribute('data-section');
            if (section) {
                showSection(section);
            }
        }

        function handleNavTouch(event) {
            event.preventDefault();
            event.stopPropagation();
            
            const section = event.currentTarget.getAttribute('data-section');
            if (section) {
                // Small delay to ensure touch is processed
                setTimeout(() => {
                    showSection(section);
                }, 50);
            }
        }

        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

                // Section navigation with hash routing
        function showSection(sectionName) {
     // Check if we're already on this section
     const currentActive = document.querySelector('.page-section.active');
     const isAlreadyActive = currentActive && currentActive.id === sectionName;
     
     // Hide all sections
     const sections = document.querySelectorAll('.page-section');
     sections.forEach(section => section.classList.remove('active'));

     // Special: reset green bar if leaving courses section
     const timeline = document.querySelector('.roadmap-timeline');
     if (timeline) {
         timeline.style.setProperty('--green-height', '0%');
     }

     // Show selected section
     const target = document.getElementById(sectionName);
     if (target) {
         target.classList.add('active');
     }

     if (sectionName === 'skills') {
         loadSkills();
     }

     if (sectionName === 'experience') {
         loadExperience();
     }

     if (sectionName === 'courses-progress') {
         loadCoursesProgress();

         // Reset roadmap cards state for re-animation
         document.querySelectorAll('.roadmap-card').forEach(el => {
             el.removeAttribute('data-animated');
         });
     }

     // Update nav highlight
     const navLinks = document.querySelectorAll('.nav-link');
     navLinks.forEach(link => link.classList.remove('active'));
     const currentLink = document.querySelector(`.nav-link[data-section="${sectionName}"]`);
     if (currentLink) currentLink.classList.add('active');

     // Close mobile menu if open
     const navLinksContainer = document.querySelector('.nav-links');
     const mobileMenu = document.querySelector('.mobile-menu');
     const backdrop = document.getElementById('mobile-backdrop');
     navLinksContainer.classList.remove('active');
     mobileMenu.classList.remove('active');
     if (backdrop) backdrop.classList.remove('active');
     document.body.classList.remove('mobile-menu-open');
     document.body.style.overflow = 'auto';
     document.body.style.paddingRight = '0px';
     document.documentElement.style.setProperty('--scrollbar-width', '0px');

     // Update hash
     if (location.hash.replace('#','') !== sectionName) {
         history.replaceState(null, '', `#${sectionName}`);
     }

     // Only scroll to top if we're switching to a different section
     if (!isAlreadyActive) {
         setTimeout(() => {
             window.scrollTo({
                 top: 0,
                 behavior: 'smooth'
             });
         }, 100);
     }
}

        // Image cache to prevent reloading
        const imageCache = new Map();

        // Check if mobile device
        function isMobileDevice() {
            return window.innerWidth <= 768;
        }

        // Mobile-specific card viewport observer
        let mobileCardObserver = null;

        function setupMobileCardObserver() {
            // Only set up on mobile
            if (!isMobileDevice()) return;

            // Clean up existing observer if any
            if (mobileCardObserver) {
                mobileCardObserver.disconnect();
            }

            mobileCardObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const card = entry.target;
                        // Add visible class with a small delay for smooth effect
                        setTimeout(() => {
                            card.classList.add('in-viewport');
                            card.classList.add('visible');
                            card.classList.add('animation-complete');
                        }, 50);
                        
                        // Stop observing once animated
                        mobileCardObserver.unobserve(card);
                    }
                });
            }, {
                threshold: 0.15, // Trigger when 15% of card is visible
                rootMargin: '0px 0px -50px 0px' // Start animation slightly before card fully enters
            });
        }

        // Observe cards for mobile scroll animation
        function observeCardsForMobile() {
            if (!isMobileDevice()) return;

            const cards = document.querySelectorAll('.project-card');
            cards.forEach(card => {
                // Reset animation state for mobile
                card.classList.remove('visible', 'in-viewport', 'animation-complete');
                card.removeAttribute('data-initiallyLoaded');
                
                // Observe card
                if (mobileCardObserver) {
                    mobileCardObserver.observe(card);
                }
            });
        }

        // Preload images efficiently
        function preloadImage(url) {
            return new Promise((resolve, reject) => {
                // Check cache first
                if (imageCache.has(url)) {
                    resolve(url);
                    return;
                }
                
                const img = new Image();
                img.onload = () => {
                    imageCache.set(url, true);
                    resolve(url);
                };
                img.onerror = () => {
                    reject(url);
                };
                img.src = url;
            });
        }

        // Progressive image loading with priority
        async function loadProjectImages() {
            const images = document.querySelectorAll('.project-image[data-src]');
            
            // Load ALL images immediately without staggering
            const loadPromises = Array.from(images).map(async (imageEl) => {
                const url = imageEl.dataset.src;
                if (url && !imageEl.classList.contains('loaded')) {
                    try {
                        await preloadImage(url);
                        imageEl.style.backgroundImage = `url('${url}')`;
                        imageEl.classList.remove('lazy');
                        imageEl.classList.add('loaded');
                    } catch (e) {
                        console.warn('Failed to load image:', url);
                    }
                }
            });
            
            // Wait for all images to load
            await Promise.all(loadPromises);
        }

        // Load projects dynamically with optimized rendering
        function loadProjects() {
            const container = document.getElementById('projects-container');
            const modalsContainer = document.getElementById('modals-container');
            
            container.innerHTML = '';
            modalsContainer.innerHTML = '';

            // Use document fragment for better performance
            const fragment = document.createDocumentFragment();
            const modalFragment = document.createDocumentFragment();

            portfolioData.projects.forEach((project, index) => {
                // Create project card
                const projectCard = document.createElement('div');
                projectCard.className = 'project-card';
                projectCard.setAttribute('role', 'button');
                projectCard.setAttribute('tabindex', '0');
                projectCard.dataset.tags = (project.category || '').toLowerCase();
                const modalId = `modal${project.id}`;
                projectCard.onclick = () => openModal(modalId);
                projectCard.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        openModal(modalId);
                    }
                });
                
                projectCard.innerHTML = `
                    <div class="project-image lazy" data-src="${project.image}"></div>
                    <div class="project-text">
                        <h3>${project.title}</h3>
                        <p>${project.description}</p>
                    </div>
                `;
                
                fragment.appendChild(projectCard);

                // Create modal
                const modal = document.createElement('div');
                modal.id = `modal${project.id}`;
                modal.className = 'modal';
                
                const detailImagesHtml = project.detailImages.map(img => 
                    `<div class="modal-image" style="background-image: url('${img}')"></div>`
                ).join('');

                const featuresHtml = project.features.map(feature => `• ${feature}`).join('<br>');
                const linksHtml = `
                    ${project.github ? `<a href="${project.github}" target="_blank" class="cta-button" style="margin-right:0.5rem;">View Code</a>` : ''}
                    ${project.demo ? `<a href="${project.demo}" target="_blank" class="cta-button">Live Demo</a>` : ''}
                `;
                
                modal.innerHTML = `
                    <div class="modal-content">
                        <div class="modal-header">
                            <span class="close" onclick="closeModal('modal${project.id}')">&times;</span>
                            <h2>${project.title}</h2>
                            <p>${project.category}</p>
                        </div>
                        <div class="modal-body">
                            <div class="modal-images">
                                ${detailImagesHtml}
                            </div>
                            <div class="modal-text">
                                <h3>Project Overview</h3>
                                <p>${project.overview}</p>
                                
                                <h3>Key Features</h3>
                                <p>${featuresHtml}</p>
                                
                                <h3>Technologies Used</h3>
                                <p>${project.technologies}</p>
                                <div style="margin-top:1rem;">${linksHtml}</div>
                            </div>
                        </div>
                    </div>
                `;
                
                modalFragment.appendChild(modal);
            });

            // Append all elements at once
            container.appendChild(fragment);
            modalsContainer.appendChild(modalFragment);

            // Start loading images and make cards visible immediately without animation
            requestAnimationFrame(async () => {
                // Load all images first
                await loadProjectImages();

                // Make all cards visible instantly without animation on initial load
                const cards = document.querySelectorAll('.project-card');
                cards.forEach((card) => {
                    card.classList.add('visible');
                    card.classList.add('in-viewport');
                    card.classList.add('animation-complete');
                    card.dataset.initiallyLoaded = 'true';
                });
            });
        }

        // Build filter buttons and enable filtering
        function buildFilters() {
            const bar = document.getElementById('filter-bar');
            if (!bar) return;
            // Collect unique tags
            const tagSet = new Set();
            portfolioData.projects.forEach(p => {
                (p.category || '').split(',').map(t => t.trim()).filter(Boolean).forEach(t => tagSet.add(t));
            });
            const tags = ['All', ...Array.from(tagSet)];
            bar.innerHTML = '';
            tags.forEach((tag, idx) => {
                const btn = document.createElement('button');
                btn.className = 'filter-button' + (idx === 0 ? ' active' : '');
                btn.textContent = tag;
                btn.addEventListener('click', () => applyFilter(tag));
                bar.appendChild(btn);
            });
        }

        function applyFilter(tag) {
            const buttons = document.querySelectorAll('.filter-button');
            buttons.forEach(b => b.classList.remove('active'));
            const active = Array.from(buttons).find(b => b.textContent === tag);
            if (active) active.classList.add('active');

            const cards = document.querySelectorAll('#projects-container .project-card');
            const grid = document.getElementById('projects-container');
            
            // Determine which cards should be visible
            let visible = [];
            let hidden = [];
            
            if (tag === 'All') {
                visible = Array.from(cards);
                grid.classList.remove('filtered');
            } else {
                const needle = tag.toLowerCase();
                cards.forEach(c => {
                    const tags = c.dataset.tags || '';
                    const match = tags.includes(needle);
                    if (match) {
                        visible.push(c);
                    } else {
                        hidden.push(c);
                    }
                });
                
                // When filtered, center the remaining cards
                grid.classList.add('filtered');
            }
            
            // Use requestAnimationFrame for smoother transitions
            requestAnimationFrame(() => {
                // Fade out all cards currently visible
                const currentlyVisible = Array.from(cards).filter(c => c.style.display !== 'none');
                currentlyVisible.forEach(c => {
                    c.classList.remove('visible');
                });
                
                // After fade out completes, update display and fade in
                setTimeout(() => {
                    requestAnimationFrame(() => {
                        // Hide non-matching cards (preserve their loaded state)
                        hidden.forEach(c => {
                            c.style.display = 'none';
                        });
                        
                        // Show matching cards and ensure images are loaded
                        visible.forEach(c => {
                            c.style.display = '';
                            
                            // Ensure image is loaded if it wasn't already
                            const imageEl = c.querySelector('.project-image');
                            if (imageEl && !imageEl.classList.contains('loaded')) {
                                const url = imageEl.dataset.src;
                                if (url) {
                                    preloadImage(url).then(() => {
                                        imageEl.style.backgroundImage = `url('${url}')`;
                                        imageEl.classList.remove('lazy');
                                        imageEl.classList.add('loaded');
                                    });
                                }
                            }
                        });
                        
                        // Stagger fade-in animation for filtered cards (mobile and desktop)
                        visible.forEach((c, index) => {
                            setTimeout(() => {
                                requestAnimationFrame(() => {
                                    c.classList.add('visible');
                                    c.classList.add('in-viewport');
                                    c.classList.add('animation-complete');
                                });
                            }, index * 60); // Gentle stagger for smooth appearance
                        });
                    });
                }, 300); // Shorter wait time
            });
        }

    // Load skills dynamically
        function loadSkills() {
            const container = document.getElementById('skills-container');
            container.innerHTML = '';

            portfolioData.skills.forEach((skill, index) => {
                const skillCard = document.createElement('div');
                skillCard.className = 'skill-card';
                
                skillCard.innerHTML = `
                    <div class="skill-image" style="background-image: url('${skill.image}'); background-color: transparent; background-size: cover; background-position: center;"></div>
                    <div class="skill-name">${skill.name}</div>
                    <div class="skill-proficiency">
                        <div class="proficiency-bar">
                            <div class="proficiency-fill" data-width="${skill.proficiency}" style="width: 0%"></div>
                        </div>
                        <div class="proficiency-text">${skill.proficiency}%</div>
                    </div>
                    <div class="skill-description">
                        <p><strong>Learning Path:</strong> ${skill.learningPath}</p>
                        <br>
                        <p><strong>Description:</strong> ${skill.description}</p>
                    </div>
                `;
                
                container.appendChild(skillCard);
            });

            // Set up intersection observers for skill cards after they're loaded
            setTimeout(() => {
                document.querySelectorAll('.skill-card').forEach(el => {
                    const progressBar = el.querySelector('.proficiency-fill');
                    if (progressBar) {
                        progressBar.style.width = '0%';
                    }
                    animationObserver.observe(el);
                });
            }, 100);
}

// Load experience section dynamically
function loadExperience() {
    const container = document.getElementById('experience-container');
    container.innerHTML = '';

    if (!portfolioData.experience || !portfolioData.experience.timeline) return;

    portfolioData.experience.timeline.forEach((item, index) => {
        const timelineItem = document.createElement('div');
        timelineItem.className = 'timeline-item';
        
        const achievementsHtml = item.achievements.map(achievement => 
            `<li>${achievement}</li>`
        ).join('');
        
        timelineItem.innerHTML = `
            <h4>${item.title}</h4>
            <div class="meta">${item.company} — ${item.period}</div>
            <ul>
                ${achievementsHtml}
            </ul>
        `;
        
        container.appendChild(timelineItem);
    });
}

// Load courses & progress section with roadmap design
function loadCoursesProgress() {
    const container = document.getElementById('roadmap-container');
    const goalsContainer = document.getElementById('learning-goals-container');
    
    if (!portfolioData.coursesProgress) return;
    
    // Clear containers
    container.innerHTML = '';
    goalsContainer.innerHTML = '';
    
    const coursesData = portfolioData.coursesProgress;
    
    // Load roadmap items
    coursesData.roadmapItems.forEach((item, index) => {
        const roadmapItem = document.createElement('div');
        const cardClass = item.showAsTbd ? 'tbd' : (item.status || 'planned');
        roadmapItem.className = `roadmap-item ${item.position || 'left'} ${cardClass}`;
        
        if (item.showAsTbd) {
            roadmapItem.innerHTML = `
                <div class="roadmap-card roadmap-card-tbd ${cardClass}">
                    <div class="tbd-content">TBD</div>
                </div>
            `;
        } else {
            const skillTagsHtml = (item.skills || []).map(skill => 
                `<span class="skill-tag">${skill}</span>`
            ).join('');
            const statusLabel = (item.status || 'planned').charAt(0).toUpperCase() + (item.status || 'planned').slice(1);
            roadmapItem.innerHTML = `
                <div class="roadmap-card ${cardClass}">
                    <div class="course-header">
                        <h3>${item.title}</h3>
                        <div class="course-platform">${item.platform}</div>
                    </div>
                    <div class="course-category">${item.category}</div>
                    <div class="course-description">${item.description}</div>
                    <div class="course-status">
                        <span class="status-badge status-${cardClass}">${statusLabel}</span>
                    </div>
                    <div class="course-skills">
                        <div class="skills-label">Technologies & Skills</div>
                        <div class="skill-tags">${skillTagsHtml}</div>
                    </div>
                </div>
            `;
        }
        
        container.appendChild(roadmapItem);
    });
    
    // Load learning goals
    const goalsHtml = coursesData.learningGoals.map(goal => 
        `<li>${goal}</li>`
    ).join('');
    
    goalsContainer.innerHTML = `
        <h3>My Learning Goals</h3>
        <ul class="goals-list">
            ${goalsHtml}
        </ul>
    `;
    
    // Set up intersection observers for roadmap cards after they're loaded
    setTimeout(() => {
        document.querySelectorAll('.roadmap-card').forEach(el => {
            el.removeAttribute('data-animated');
            animationObserver.observe(el);
        });
    }, 100);


}

    document.getElementById('fullscreen-close').onclick = function(e) {
        e.stopPropagation(); // Prevent also closing by overlay
        document.getElementById('fullscreen-image-overlay').style.display = 'none';
        document.body.style.overflow = 'auto';
    };









// Modal functions
function openModal(modalId) {
    const modal = document.getElementById(modalId);
    modal.style.display = 'block';
    
    // On mobile, don't lock body scroll - let modal scroll naturally
    if (!isMobileDevice()) {
        document.body.style.overflow = 'hidden';
        document.documentElement.style.overflow = 'hidden';
    }
}


        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            document.documentElement.style.overflow = '';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            const modals = document.getElementsByClassName('modal');
            for (let i = 0; i < modals.length; i++) {
                if (event.target === modals[i]) {
                    modals[i].style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.documentElement.style.overflow = '';
                }
            }
        }

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modals = document.getElementsByClassName('modal');
                for (let i = 0; i < modals.length; i++) {
                    if (modals[i].style.display === 'block') {
                        modals[i].style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                }
            }
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.01,
            rootMargin: '0px 0px 0px 0px'
        };

        const animationObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !entry.target.hasAttribute('data-animated')) {
                    const element = entry.target;
                    
                    // Mark as animated to prevent repetition
                    element.setAttribute('data-animated', 'true');
                    
                    // Handle different types of animated elements
                    if (element.classList.contains('fade-in') || 
                        element.classList.contains('fade-in-delayed') || 
                        element.classList.contains('fade-in-slow')) {
                        element.style.animationPlayState = 'running';
                    }
                    
                    // Handle skill bars animation
                    if (element.classList.contains('skill-card')) {
                        const progressBar = element.querySelector('.proficiency-fill');
                        if (progressBar) {
                            const targetWidth = progressBar.getAttribute('data-width');
                            progressBar.style.width = targetWidth + '%';
                        }
                        
                        // Animate skill percentage counting
                        const progressText = element.querySelector('.proficiency-text');
                        if (progressText) {
                            const target = parseInt(progressText.textContent);
                            progressText.textContent = '0%';
                            let count = 0;
                            const interval = setInterval(() => {
                                if (count >= target) {
                                    clearInterval(interval);
                                } else {
                                    count++;
                                    progressText.textContent = count + '%';
                                }
                            }, 20);
                        }
                    }
                    
                    // Roadmap cards: mark as animated (no progress bar)
                    if (element.classList.contains('roadmap-card')) {
                        // Card visible; status badge is static
                    }
                    
                    // Handle project cards
                    if (element.classList.contains('project-card')) {
                        requestAnimationFrame(() => {
                            element.classList.add('visible');
                        });
                    }
                    

                }
            });
        }, observerOptions);

        // Function to set up intersection observers for all animated elements
        function setupAnimationObservers() {
            // Observe fade-in elements
            document.querySelectorAll('.fade-in, .fade-in-delayed, .fade-in-slow').forEach(el => {
                el.style.animationPlayState = 'paused';
                animationObserver.observe(el);
            });
            
            // Observe project cards (only if not already visible)
            document.querySelectorAll('.project-card').forEach(el => {
                if (!el.classList.contains('visible')) {
                    animationObserver.observe(el);
                }
            });
            

        }

        // Handle window resize - switch between mobile and desktop animation modes
        let resizeTimeout;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                const wasMobile = document.body.classList.contains('mobile-mode');
                const nowMobile = isMobileDevice();
                
                if (wasMobile !== nowMobile) {
                    if (nowMobile) {
                        document.body.classList.add('mobile-mode');
                        setupMobileCardObserver();
                        observeCardsForMobile();
                    } else {
                        document.body.classList.remove('mobile-mode');
                        if (mobileCardObserver) {
                            mobileCardObserver.disconnect();
                        }
                        // Make all cards visible on desktop
                        document.querySelectorAll('.project-card').forEach(card => {
                            card.classList.add('visible', 'animation-complete');
                        });
                    }
                }
            }, 250);
        });

        // Initialize the website
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                // Set initial mobile mode
                if (isMobileDevice()) {
                    document.body.classList.add('mobile-mode');
                }

                // Load all data first
                await loadData();
                
                // Then load all sections
                loadProjects();
                buildFilters();
                loadSkills();
                loadExperience();
                loadCoursesProgress();
                
                // Set up intersection observers for animations
                setupAnimationObservers();
                
                // Set up navigation handlers for touch devices
                setupNavigationHandlers();
                
                // Navigate to section from hash on load
                const initialSection = location.hash.replace('#','') || 'home';
                showSection(initialSection);
            } catch (error) {
                console.error('Failed to initialize website:', error);
                // Fallback to original static content if JSON fails
            }

            
            // Set initial active nav link based on current section
            const initialSection = location.hash.replace('#','') || 'home';
            const initialLink = document.querySelector(`.nav-link[data-section="${initialSection}"]`);
            if (initialLink) initialLink.classList.add('active');
            

            



                // For every modal
            document.querySelectorAll('.modal').forEach(function(modal) {
                // Listen for both click and touchend
                ['click', 'touchend'].forEach(function(eventType) {
                    modal.addEventListener(eventType, function(e) {
                        // Only close if the click/tap is on the overlay, NOT inside modal-content
                        if (e.target === modal) {
                            modal.style.display = 'none';
                            document.body.style.overflow = 'auto';
                            document.documentElement.style.overflow = '';
                        }
                    });
                });
            });

            // Update section on hash change
            window.addEventListener('hashchange', () => {
                const s = location.hash.replace('#','') || 'home';
                showSection(s);
            });
        });

        // Function to add new project (for demonstration)
        function addProject(projectData) {
            portfolioData.projects.push(projectData);
            loadProjects();
        }

        let currentImageIndex = 0;
        let currentImageArray = [];

            // Open image fullscreen in overlay
            document.addEventListener('click', function(event) {
                // Only act if clicking a modal-image
                if (event.target.classList.contains('modal-image')) {
                    // Get all images from the same modal
                    const modal = event.target.closest('.modal');
                    const allImages = modal.querySelectorAll('.modal-image');
                    currentImageArray = Array.from(allImages).map(img => {
                        const bg = img.style.backgroundImage;
                        const urlMatch = bg.match(/url\(['"]?(.*?)['"]?\)/);
                        return urlMatch ? urlMatch[1] : '';
                    }).filter(url => url);
                    
                    // Find which image was clicked
                    currentImageIndex = Array.from(allImages).indexOf(event.target);
                    
                    showFullscreenImage();
                }
            });

            function showFullscreenImage() {
                if (currentImageArray.length === 0) return;
                
                const overlay = document.getElementById('fullscreen-image-overlay');
                const img = document.getElementById('fullscreen-image');
                const counter = document.getElementById('fullscreen-counter');
                const prevBtn = document.getElementById('fullscreen-prev');
                const nextBtn = document.getElementById('fullscreen-next');
                
                img.src = currentImageArray[currentImageIndex];
                counter.textContent = `${currentImageIndex + 1} / ${currentImageArray.length}`;
                
                // Show/hide navigation buttons based on number of images
                if (currentImageArray.length <= 1) {
                    prevBtn.style.display = 'none';
                    nextBtn.style.display = 'none';
                } else {
                    prevBtn.style.display = 'flex';
                    nextBtn.style.display = 'flex';
                }
                
                overlay.style.display = 'flex';
                document.body.style.overflow = 'hidden';
                document.documentElement.style.overflow = 'hidden';
            }

            // Previous image
            document.getElementById('fullscreen-prev').onclick = function(e) {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex - 1 + currentImageArray.length) % currentImageArray.length;
                showFullscreenImage();
            };

            // Next image
            document.getElementById('fullscreen-next').onclick = function(e) {
                e.stopPropagation();
                currentImageIndex = (currentImageIndex + 1) % currentImageArray.length;
                showFullscreenImage();
            };

            // Close overlay on background click
            document.getElementById('fullscreen-image-overlay').onclick = function(e) {
                // Only close if clicking the overlay itself, not the image or buttons
                if (e.target === this) {
                    this.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    document.documentElement.style.overflow = '';
                }
            };
            
            // Arrow key navigation
            document.addEventListener('keydown', function(event) {
                const overlay = document.getElementById('fullscreen-image-overlay');
                if (overlay.style.display === 'flex') {
                    if (event.key === 'Escape') {
                        overlay.style.display = 'none';
                        document.body.style.overflow = 'auto';
                        document.documentElement.style.overflow = '';
                    } else if (event.key === 'ArrowLeft') {
                        currentImageIndex = (currentImageIndex - 1 + currentImageArray.length) % currentImageArray.length;
                        showFullscreenImage();
                    } else if (event.key === 'ArrowRight') {
                        currentImageIndex = (currentImageIndex + 1) % currentImageArray.length;
                        showFullscreenImage();
                    }
                }
            });



        // Function to add new skill (for demonstration)
        function addSkill(skillData) {
            portfolioData.skills.push(skillData);
            loadSkills();
        }



    </script>
    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Alward Hafez",
      "jobTitle": "Mechatronics Engineer",
      "url": "",
      "image": "images/profile.webp",
      "sameAs": [
        "https://www.linkedin.com/in/Alward-Hafez-24b1541b1/",
        "https://github.com/AlwardHafez"
      ]
    }
    </script>
    <script>
    // Desktop Swiper
    const desktopSwiper = new Swiper('#desktop-swiper', {
        loop: true,
        autoplay: {
        delay: 4000, 
        disableOnInteraction: false
        },
        pagination: {
        el: '#desktop-pagination',
        clickable: true,
        },
    });

    // Mobile Swiper
    const mobileSwiper = new Swiper('#mobile-swiper', {
        loop: true,
        autoplay: {
        delay: 4000, 
        disableOnInteraction: false
        },
        pagination: {
        el: '#mobile-pagination',
        clickable: true,
        },
    });
    </script>
</body>
</html>
